# ==============================================================================
# Test Configuration for Spring Boot Application
# MuPACS (Minimal PACS) - DICOM Archive System
# ==============================================================================
# This configuration is used when running tests with @ActiveProfiles("test")
# It uses a separate SQLite database that is recreated for each test run

# ------------------------------------------------------------------------------
# Debug and Development Settings
# ------------------------------------------------------------------------------
debug=false
spring.thymeleaf.cache=false
# Enable ANSI colors in test output for better readability
spring.output.ansi.enabled=ALWAYS

# ------------------------------------------------------------------------------
# Test Database Configuration (H2)
# ------------------------------------------------------------------------------
# H2 in-memory database for tests - creates fresh database for each test run
# DB_CLOSE_DELAY=-1: Keep database open until JVM exits (needed for test execution)
# MODE=LEGACY: Use legacy compatibility mode for better compatibility
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver

# H2 database credentials (default for embedded database)
spring.datasource.username=sa
spring.datasource.password=

# Connection pool configuration for tests
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.connection-timeout=30000

# ------------------------------------------------------------------------------
# JPA/Hibernate Configuration for Tests
# ------------------------------------------------------------------------------
# create-drop: Database schema is created before tests and dropped after tests complete
# This ensures a clean database state for each test run
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.generate-ddl=true

# Show SQL statements in test logs for debugging
spring.jpa.properties.hibernate.show_sql=true

# H2 dialect is auto-detected by Hibernate, no need to specify
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# Optional: Enable for more readable SQL output in test logs
# spring.jpa.properties.hibernate.use_sql_comments=true
# spring.jpa.properties.hibernate.format_sql=true

# ------------------------------------------------------------------------------
# MuPACS Application Settings
# ------------------------------------------------------------------------------
mupacs.archive=./archive-test
mupacs.cstore.scp.import=./import-test

# DICOM SCP (Service Class Provider) network settings
mupcas.dicom.scp.ae-title=MUPACS_TEST
mupcas.dicom.scp.port=11112
mupcas.dicom.scp.host=localhost

# DICOM SCU (Service Class User) network settings
mupacs.dicom.scu.ae-title=MUPACS_SCU
mupacs.dicom.scu.connect-timeout=5000
mupacs.dicom.scu.response-timeout=10000

# Remote DICOM AETs (Application Entity Titles)
# Format: aet@host:port;aet@host:port;...
# Example: PACS1@192.168.1.100:104;PACS2@pacs.hospital.org:11112
mupacs.dicom.aet=TEST_PACS1@localhost:104;TEST_PACS2@192.168.1.100:11112
